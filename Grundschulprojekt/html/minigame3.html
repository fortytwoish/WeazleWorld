
<h1>I AM THE TREE GAME</h1>

<button id="exitMinigameButton" style="margin:auto">Exit</button>
<button id="startGameButton" style="margin:auto">START</button>
<button id="CountedButton" style="margin:auto">COUNTED</button>
<div id="treeBin" style="position:fixed; left:230px; width: 600px; height: 400px; background-color:lightblue"></div>
<script>
    $(function () {
        $("#exitMinigameButton").click(function () {
            isInMenu = false;
            console.log("exitMinigame button clicked.");
            parent.printMenuState();
            $("#minigame").css("visibility", "hidden");
            $("#minigameButton").css("visibility", "visible");
        });

        var imageUrl = "../img/treeGame/woods.jpg";
        $("#minigame").css('background-image', 'url(' + imageUrl + ')');
        var rand = 0;
        var clickCount = 0;
        var zInd = 0;
        var positioning = 250;
        var top = 120;
        var first = true;

        $("#startGameButton").click(function () {

            clickCount++;

            var rand = Math.floor(Math.random() * 40) + 1  
            $("#textArea").html("<input type='text' id='countedText'>");
            
            if (clickCount % 2 == "1") {
                for (var i = 0; i < rand; i++) {

                    var randPic = Math.floor((Math.random() * 3) + 1);
                    var id = "tree" + zInd;

                    zInd++;
                    positioning += 60;
                    $("#treeBin").append('<img src="../img/treeGame/tree' + randPic + '.png" id="' + id + '" class="tree" height="100" width="100">');
                    var p = $("#"+id).position();
                    if (positioning >= 750) {
                        positioning = 230;
                        top += 80;
                    }
                    if (top >= 500) {
                        top = 120;

                    }
                    var leftN = p.left + positioning;
                    if(!first)
                        $("#" + id).offset({ top: top, left: leftN });
                    else{
                        $("#" + id).offset({ top: 120, left: 250 });
                        first = false;
                    }
                    $("#" + id).css("position", "absolute");
                    console.log($("#" + id).offset().left + " set to" + leftN + "with positioning " + positioning);
                }
            }
            else {
                $("#treeBin").empty();
                top = 120;
                positioning = 250;
                first = true;
            }
            /*$("#treeBin").append('<div class="treeLap">' +
                       '<img src="../img/treeGame/tree' + randPic + '.png" id=' + id + '" height="50" width="50" top="' + zInd + '"></div>');*/
      });

        $("#CountedButton").click(function () {
            var count = $("#CountedText").val();
            console.log("RANDOM: " + rand);
            if (count == rand) {
                console.log("GEWONNEN");
                console.log("COUNT: " + count);
                console.log("RANDOM: " + rand);
            }
            else {
                console.log("LOOOSER");
                console.log("COUNT: " + count);
                console.log("RANDOM: " + rand);
            }
        })
    });

    function randBetween(low, high) {
        var result = ((Math.random() * (high - low)) + low);
        //if (debugOutput_PointArithmetic) console.log("[randBetween] Random number between " + low + " and " + high + ": " + result);
        return result;
    }

</script>

