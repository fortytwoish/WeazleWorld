<nav id="buttonArea" style="margin-top:10px;">
    <button id="startGameButton" style="margin:0 55px; display:inline-block;width:200px; height:30px; ">START</button>
    <button id="winMinigameButton" style="margin:auto">Win</button>
    <button id="loseMinigameButton" style="margin:auto">Lose</button>
    <button id="exitMinigameButton" style="margin:0 55px;display:inline-block; float:right; width:200px; height:30px;">Exit</button>
</nav>

<div id="treeBin" style="position:absolute; left:300px; width: 70%; height: 82%; 
background-color:#bf8338; margin-top:2%; margin-left:10px; padding:1%; padding-left:5%; border-radius: 15px 50px 5px 30px; opacity:0.8; "></div>

<div id="counterDiv" style="width:250px; margin:2% 30px 30px 30px; border-radius: 15px 50px 5px 30px; opacity:0.8; background-color:#bf8338;">
    <input type="number" id="1treeCountBox" style="width:50px; opacity:0.8;  margin:4% 20px 20px 20px; text-align:center; vertical-align:text-bottom">
    <img src="../img/treeGame/tree1.png" style="height: 100px; width:100px" />

    <input type="number" id="2treeCountBox" style="width:50px; opacity:0.8;  margin:4% 20px 20px 20px; text-align:center; vertical-align:text-bottom">
    <img src="../img/treeGame/tree2.png" style="height: 100px; width:100px" />

    <input type="number" id="3treeCountBox" style="width:50px; opacity:0.8;  margin:4% 20px 20px 20px; text-align:center; vertical-align:text-bottom">
    <img src="../img/treeGame/tree3.png" style="height: 100px; width:100px" />
</div>

<button id="CountedButton" style="margin:10px 55px; width:200px; height:30px; display:inline-block;">COUNTED</button>

<style>
     input[type=number]::-webkit-inner-spin-button {
        opacity: 1;
    }    
</style>

<script>

    var treeAhornSrc = "";
    var treeKastanieSrc = "";
    var treenSource = "";
    var treeAhornSource = "";
    var treeAhornSource = "";

    var imageUrl = "../img/treeGame/woods.jpg";
    $("#minigame").css('background-image', 'url(' + imageUrl + ')');
    var rand = 0;
    var clickCount = 0;
    var zInd = 0;
    var positioning = 230;
    var top = 120;
    var first = true;
    var shape = "triangle";

    $("#startGameButton").click(function () {
        
        clickCount++;

        rand = Math.floor(Math.random() * 5) + 3;

        var square = rand * rand;

        //maxArea
        //rand = 2;

        $("#textArea").html("<input type='text' id='countedText'>");
        shape = $("#countedTrees").val();
        console.log(shape);

        var list = new Array();
        if (clickCount % 2 == "1") {
            if (shape == "triangle") {

                var randPic = Math.floor((Math.random() * 3) + 1);

                var id = "tree" + zInd;
                positioning += 30;

                for (var i = 0; i < 5; i++) {

                    for (var j = 0; j < i * 2 + 1; j++) {
                        var randPic = Math.floor((Math.random() * 3) + 1);
                        $("#treeBin").append('<img src="../img/treeGame/tree' + randPic + '.png" id="' + id + '" class="tree" height="20%" width="10%">');

                        // $("#" + id).offset({ top: newLine, left: leftN });
                        $("#" + id).css("position", "absolute");
                    }
                    for (var i = 0; i < (11 - rand) ; i++) {
                        $("#treeBin").append('<img src="../img/treeGame/transparent.png" id="' + id + '" class="tree" height="20%" width="10%" position="absolute">');
                    }

                }
            }
            else {

                for (var i = 0; i < square; i++) {
                    var randPic = Math.floor((Math.random() * 3) + 1);
                    var id = "tree" + zInd;
                    zInd++;
                    list[i] = '<img src="../img/treeGame/tree' + randPic + '.png" id="' + id + '" class="tree" height="20%" width="10%">';
                }

                var counter = 0;
                $.each(list, function (index, value) {
                    console.log("randomVal: " + rand)
                    var id = "tree" + zInd;
                    if (counter == rand) {
                        console.log("printing " + (11 - rand) + " transparents!" + " with counter " + counter);

                        counter = 0;
                    }
                    $("#treeBin").append(value);
                    counter++;
                });

                var randOffset = Math.floor((Math.random() * 20) + 1);

                // works with height....
                $(".tree").each(function (index, value) {

                    $(this).animate({
                        "margin-left": "-=" + randOffset
                    }, 10);
                });

                $(".tree").click(function () {
                    degree = 100;
                    //alert("ANIMATING!!!!! ID: " + $(this).prop("id") + " VALUE IS " +  'transform: rotate(' + degree + 'deg)');
                    // alert($(this).prop("id"));
                    rotate(degree, $(this));
                });
            }
        }
        else {
            $("#treeBin").empty();
            top = 120;
            positioning = 250;
            first = true;
        }

        $("#CountedButton").click(function () {
            
            var t1 = $("img[src='../img/treeGame/tree1.png']").length - 1;
            var t2 = $("img[src='../img/treeGame/tree2.png']").length - 1;
            var t3 = $("img[src='../img/treeGame/tree3.png']").length - 1;
            console.log($("#1treeCountBox").val());

            if ($("#3treeCountBox").val() == t3 && $("#2treeCountBox").val() == t2 && $("#1treeCountBox").val() == t1)
            {         
                alert("GEWONNEN..");
            }
            else {
                alert("VERLOREN... es wäre: Tree1 " + t1 + " Tree2 " + t2 + " Tree3 " + t3);
                console.log("LOOOSER");      
            }
        });
    });

    $( "#winMinigameButton" ).click( function ()
    {
        resetMinigame();
        minigameWon( 3 );
    } );
    $( "#loseMinigameButton" ).click( function ()
    {
        resetMinigame();
        minigameLost( 3 );
    } );
    $( "#exitMinigameButton" ).click( function ()
    {
        resetMinigame();
        exitMinigame();
    } );

    function resetMinigame()
    {
        //TODO!!
    }

    //function randBetween(low, high) {
    //    var result = ((Math.random() * (high - low)) + low).parseInt();
    //    //if (debugOutput_PointArithmetic) console.log("[randBetween] Random number between " + low + " and " + high + ": " + result);
    //    return result;
    //};

    function rotate(degree, tree) {
        //alert("#" + tree);
        //$("#" + tree).css("position", "absolute");
        tree.animate({
           'height':'8s0px',
           'transform': 'rotate(100deg)',
           'zoom': '1'
        }, 5000)
    };

</script>

<script>

</script>